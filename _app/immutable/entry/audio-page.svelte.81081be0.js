import{S as ae,i as se,s as le,k as _,q as D,a as q,l as p,m as v,r as M,h as u,c as B,p as I,n as o,J as ne,L as re,b as J,E as n,M as Y,F as oe,K as Z,o as ie,N as ce,O as ue}from"../chunks/index.b8290f32.js";import{h as N}from"../chunks/singletons.3c2c549d.js";import{b as de}from"../chunks/paths.17a3feb0.js";N.disable_scroll_handling;N.goto;N.invalidate;N.invalidateAll;N.preload_data;N.preload_code;const he=N.before_navigate;N.after_navigate;function $(i,a,t){const e=i.slice();return e[4]=a[t],e}function ee(i){let a,t=i[0],e=[];for(let l=0;l<t.length;l+=1)e[l]=te($(i,t,l));return{c(){a=_("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){a=p(l,"DIV",{class:!0,style:!0});var r=v(a);for(let s=0;s<e.length;s+=1)e[s].l(r);r.forEach(u),this.h()},h(){o(a,"class","visualizer svelte-15sot29"),I(a,"--vis-scale",48/i[1])},m(l,r){J(l,a,r);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(a,null)},p(l,r){if(r&1){t=l[0];let s;for(s=0;s<t.length;s+=1){const A=$(l,t,s);e[s]?e[s].p(A,r):(e[s]=te(A),e[s].c(),e[s].m(a,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}r&2&&I(a,"--vis-scale",48/l[1])},d(l){l&&u(a),ce(e,l)}}}function te(i){let a;return{c(){a=_("div"),this.h()},l(t){a=p(t,"DIV",{style:!0,class:!0}),v(a).forEach(u),this.h()},h(){I(a,"--bar-width",R+"px"),I(a,"--bar-height",Math.abs(128-i[4])*2+R+"px"),o(a,"class","svelte-15sot29")},m(t,e){J(t,a,e)},p(t,e){e&1&&I(a,"--bar-height",Math.abs(128-t[4])*2+R+"px")},d(t){t&&u(a)}}}function fe(i){let a,t,e,l,r,s,A,d,g,O,h,m,K,w,f,E,z,y,L,k,V,x,U,W,c=i[0]&&ee(i);return{c(){a=_("main"),t=_("div"),e=_("span"),l=D("Russian Dance - Tchaikovsky Nutcracker Suite"),r=q(),s=_("span"),A=D("Conducted by "),d=_("a"),g=D("Philip Milman"),O=q(),h=_("div"),m=_("audio"),w=q(),f=_("select"),E=_("option"),z=D("16"),y=_("option"),L=D("32"),k=_("option"),V=D("64"),x=q(),c&&c.c(),this.h()},l(b){a=p(b,"MAIN",{class:!0});var S=v(a);t=p(S,"DIV",{class:!0});var C=v(t);e=p(C,"SPAN",{style:!0,class:!0});var j=v(e);l=M(j,"Russian Dance - Tchaikovsky Nutcracker Suite"),j.forEach(u),r=B(C),s=p(C,"SPAN",{class:!0});var F=v(s);A=M(F,"Conducted by "),d=p(F,"A",{href:!0,target:!0,rel:!0,style:!0});var G=v(d);g=M(G,"Philip Milman"),G.forEach(u),F.forEach(u),O=B(C),h=p(C,"DIV",{style:!0});var P=v(h);m=p(P,"AUDIO",{id:!0,preload:!0,src:!0}),v(m).forEach(u),w=B(P),f=p(P,"SELECT",{id:!0,class:!0});var T=v(f);E=p(T,"OPTION",{class:!0});var H=v(E);z=M(H,"16"),H.forEach(u),y=p(T,"OPTION",{class:!0});var Q=v(y);L=M(Q,"32"),Q.forEach(u),k=p(T,"OPTION",{class:!0});var X=v(k);V=M(X,"64"),X.forEach(u),T.forEach(u),P.forEach(u),x=B(C),c&&c.l(C),C.forEach(u),S.forEach(u),this.h()},h(){I(e,"font-size","1.4em"),o(e,"class","svelte-15sot29"),o(d,"href","https://pmmusic.pro/"),o(d,"target","_blank"),o(d,"rel","noopener noreferrer"),I(d,"text-decoration","underline"),o(s,"class","svelte-15sot29"),o(m,"id","piece"),m.controls=!0,o(m,"preload","auto"),ne(m.src,K=de+"/Tchaikovsky.mp3")||o(m,"src",K),E.__value=16,E.value=E.__value,o(E,"class","svelte-15sot29"),y.__value=32,y.value=y.__value,y.selected=!0,o(y,"class","svelte-15sot29"),k.__value=64,k.value=k.__value,o(k,"class","svelte-15sot29"),o(f,"id","barCount"),o(f,"class","svelte-15sot29"),i[1]===void 0&&re(()=>i[2].call(f)),I(h,"display","flex"),I(h,"gap","5px"),o(t,"class","wrapper svelte-15sot29"),o(a,"class","svelte-15sot29")},m(b,S){J(b,a,S),n(a,t),n(t,e),n(e,l),n(t,r),n(t,s),n(s,A),n(s,d),n(d,g),n(t,O),n(t,h),n(h,m),n(h,w),n(h,f),n(f,E),n(E,z),n(f,y),n(y,L),n(f,k),n(k,V),Y(f,i[1],!0),n(t,x),c&&c.m(t,null),U||(W=oe(f,"change",i[2]),U=!0)},p(b,[S]){S&2&&Y(f,b[1]),b[0]?c?c.p(b,S):(c=ee(b),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:Z,o:Z,d(b){b&&u(a),c&&c.d(),U=!1,W()}}}const R=10;function _e(i,a,t){let e,l,r=32;ie(()=>{var m;const A=document.getElementById("piece"),d=new AudioContext,g=d.createAnalyser();d.createMediaElementSource(A).connect(g),g.connect(d.destination),g.fftSize=r*2;let h=g.frequencyBinCount;t(0,e=new Uint8Array(h)),l=setInterval(()=>{g.getByteTimeDomainData(e),t(0,e)},50),(m=document.getElementById("barCount"))==null||m.addEventListener("change",()=>{g.fftSize=r*2,h=g.frequencyBinCount,t(0,e=new Uint8Array(h))})}),he(()=>{clearInterval(l)});function s(){r=ue(this),t(1,r)}return[e,r,s]}class ge extends ae{constructor(a){super(),se(this,a,_e,fe,le,{})}}export{ge as default};
