import{S as re,i as ie,s as oe,k as b,q as C,a as z,l as y,m as g,r as D,h as d,c as M,p as A,n as c,J as ce,L as ue,b as R,E as h,M as Z,F as he,K as Q,N as le,o as fe,O as ae,P as ne,Q as _e}from"../chunks/index.0e253846.js";import{h as N}from"../chunks/singletons.9412a90a.js";import{b as de}from"../chunks/paths.8edfd489.js";N.disable_scroll_handling;N.goto;N.invalidate;N.invalidateAll;N.preload_data;N.preload_code;const ve=N.before_navigate;N.after_navigate;function x(i,e,t){const l=i.slice();l[5]=e[t],l[8]=t;const a=200/l[1];return l[6]=a,l}function $(i,e,t){const l=i.slice();return l[9]=e[t],l}function ee(i){let e,t=i[9]+"",l;return{c(){e=b("option"),l=C(t),this.h()},l(a){e=y(a,"OPTION",{class:!0});var s=g(e);l=D(s,t),s.forEach(d),this.h()},h(){e.__value=i[9],e.value=e.__value,c(e,"class","svelte-pswg8m")},m(a,s){R(a,e,s),h(e,l)},p:Q,d(a){a&&d(e)}}}function te(i){let e,t,l=i[0],a=[];for(let s=0;s<l.length;s+=1)a[s]=se(x(i,l,s));return{c(){e=b("div"),t=ae("svg");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0,style:!0});var n=g(e);t=ne(n,"svg",{class:!0,style:!0,viewBox:!0});var o=g(t);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","visualizer-svg svelte-pswg8m"),A(t,"height","100%"),c(t,"viewBox","0 0 200 100"),c(e,"class","visualizer svelte-pswg8m"),A(e,"--vis-height",ge+"px"),A(e,"--vis-scale",48/i[1])},m(s,n){R(s,e,n),h(e,t);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(t,null)},p(s,n){if(n&3){l=s[0];let o;for(o=0;o<l.length;o+=1){const f=x(s,l,o);a[o]?a[o].p(f,n):(a[o]=se(f),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length}n&2&&A(e,"--vis-scale",48/s[1])},d(s){s&&d(e),le(a,s)}}}function se(i){let e,t,l,a;return{c(){e=ae("rect"),this.h()},l(s){e=ne(s,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),g(e).forEach(d),this.h()},h(){c(e,"x",t=i[8]*i[6]),c(e,"y",0),c(e,"width",l=i[6]),c(e,"height",a=i[5]/128*100*.5),c(e,"class","svelte-pswg8m")},m(s,n){R(s,e,n)},p(s,n){n&6&&t!==(t=s[8]*s[6])&&c(e,"x",t),n&6&&l!==(l=s[6])&&c(e,"width",l),n&1&&a!==(a=s[5]/128*100*.5)&&c(e,"height",a)},d(s){s&&d(e)}}}function pe(i){let e,t,l,a,s,n,o,f,S,w,E,p,P,L,m,V,k,U,F,G,H,W,j,B=i[2],_=[];for(let u=0;u<B.length;u+=1)_[u]=ee($(i,B,u));let v=i[0]&&te(i);return{c(){e=b("main"),t=b("div"),l=b("span"),a=C("Russian Dance - Tchaikovsky Nutcracker Suite"),s=z(),n=b("span"),o=C("Conducted by "),f=b("a"),S=C("Philip Milman"),w=z(),E=b("div"),p=b("audio"),L=z(),m=b("select");for(let u=0;u<_.length;u+=1)_[u].c();V=z(),k=b("span"),U=C("!!WARNING!!"),F=b("br"),G=C("High values might be slow on some devices"),H=z(),v&&v.c(),this.h()},l(u){e=y(u,"MAIN",{class:!0});var I=g(e);t=y(I,"DIV",{class:!0});var r=g(t);l=y(r,"SPAN",{style:!0,class:!0});var q=g(l);a=D(q,"Russian Dance - Tchaikovsky Nutcracker Suite"),q.forEach(d),s=M(r),n=y(r,"SPAN",{class:!0});var J=g(n);o=D(J,"Conducted by "),f=y(J,"A",{href:!0,target:!0,rel:!0,style:!0});var X=g(f);S=D(X,"Philip Milman"),X.forEach(d),J.forEach(d),w=M(r),E=y(r,"DIV",{style:!0});var T=g(E);p=y(T,"AUDIO",{id:!0,preload:!0,src:!0}),g(p).forEach(d),L=M(T),m=y(T,"SELECT",{id:!0,class:!0});var Y=g(m);for(let K=0;K<_.length;K+=1)_[K].l(Y);Y.forEach(d),T.forEach(d),V=M(r),k=y(r,"SPAN",{style:!0,class:!0});var O=g(k);U=D(O,"!!WARNING!!"),F=y(O,"BR",{}),G=D(O,"High values might be slow on some devices"),O.forEach(d),H=M(r),v&&v.l(r),r.forEach(d),I.forEach(d),this.h()},h(){A(l,"font-size","1.4em"),c(l,"class","svelte-pswg8m"),c(f,"href","https://pmmusic.pro/"),c(f,"target","_blank"),c(f,"rel","noopener noreferrer"),A(f,"text-decoration","underline"),c(n,"class","svelte-pswg8m"),c(p,"id","piece"),p.controls=!0,c(p,"preload","auto"),ce(p.src,P=de+"/Tchaikovsky.mp3")||c(p,"src",P),c(m,"id","barCount"),c(m,"class","svelte-pswg8m"),i[1]===void 0&&ue(()=>i[3].call(m)),A(E,"display","flex"),A(E,"gap","5px"),A(k,"color","firebrick"),A(k,"font-size","0.7em"),c(k,"class","svelte-pswg8m"),c(t,"class","wrapper svelte-pswg8m"),c(e,"class","svelte-pswg8m")},m(u,I){R(u,e,I),h(e,t),h(t,l),h(l,a),h(t,s),h(t,n),h(n,o),h(n,f),h(f,S),h(t,w),h(t,E),h(E,p),h(E,L),h(E,m);for(let r=0;r<_.length;r+=1)_[r]&&_[r].m(m,null);Z(m,i[1],!0),h(t,V),h(t,k),h(k,U),h(k,F),h(k,G),h(t,H),v&&v.m(t,null),W||(j=he(m,"change",i[3]),W=!0)},p(u,[I]){if(I&4){B=u[2];let r;for(r=0;r<B.length;r+=1){const q=$(u,B,r);_[r]?_[r].p(q,I):(_[r]=ee(q),_[r].c(),_[r].m(m,null))}for(;r<_.length;r+=1)_[r].d(1);_.length=B.length}I&6&&Z(m,u[1]),u[0]?v?v.p(u,I):(v=te(u),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i:Q,o:Q,d(u){u&&d(e),le(_,u),v&&v.d(),W=!1,j()}}}const ge=400;function me(i,e,t){let l,a;const s=[64,128,256,512];let n=128;fe(()=>{var P;const f=document.getElementById("piece"),S=new AudioContext,w=S.createAnalyser();S.createMediaElementSource(f).connect(w),w.connect(S.destination),w.fftSize=n*2;let p=w.frequencyBinCount;t(0,l=new Uint8Array(p)),a=setInterval(()=>{w.getByteTimeDomainData(l),t(0,l)},50),(P=document.getElementById("barCount"))==null||P.addEventListener("change",()=>{w.fftSize=n*2,p=w.frequencyBinCount,t(0,l=new Uint8Array(p))})}),ve(()=>{clearInterval(a)});function o(){n=_e(this),t(1,n),t(2,s)}return[l,n,s,o]}class Ee extends re{constructor(e){super(),ie(this,e,me,pe,oe,{})}}export{Ee as default};
