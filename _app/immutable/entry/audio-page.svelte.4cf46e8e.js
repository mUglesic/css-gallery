import{S as ae,i as se,s as le,k as _,q as N,a as O,l as p,m as v,r as S,h as u,c as q,p as I,n as o,H as ne,J as re,b as H,D as n,K as Y,L as oe,I as Z,o as ie,M as ce,N as ue}from"../chunks/index.ffcd9dff.js";import{h as C}from"../chunks/singletons.ec9c5ce1.js";import{b as de}from"../chunks/paths.3a21108c.js";C.disable_scroll_handling;C.goto;C.invalidate;C.invalidateAll;C.preload_data;C.preload_code;const he=C.before_navigate;C.after_navigate;function $(i,a,t){const e=i.slice();return e[4]=a[t],e}function ee(i){let a,t=i[0],e=[];for(let l=0;l<t.length;l+=1)e[l]=te($(i,t,l));return{c(){a=_("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){a=p(l,"DIV",{class:!0,style:!0});var r=v(a);for(let s=0;s<e.length;s+=1)e[s].l(r);r.forEach(u),this.h()},h(){o(a,"class","visualizer svelte-5nmszr"),I(a,"--vis-scale",48/i[1])},m(l,r){H(l,a,r);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(a,null)},p(l,r){if(r&1){t=l[0];let s;for(s=0;s<t.length;s+=1){const z=$(l,t,s);e[s]?e[s].p(z,r):(e[s]=te(z),e[s].c(),e[s].m(a,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}r&2&&I(a,"--vis-scale",48/l[1])},d(l){l&&u(a),ce(e,l)}}}function te(i){let a;return{c(){a=_("div"),this.h()},l(t){a=p(t,"DIV",{style:!0,class:!0}),v(a).forEach(u),this.h()},h(){I(a,"--bar-width",F+"px"),I(a,"--bar-height",Math.abs(128-i[4])*2+F+"px"),o(a,"class","svelte-5nmszr")},m(t,e){H(t,a,e)},p(t,e){e&1&&I(a,"--bar-height",Math.abs(128-t[4])*2+F+"px")},d(t){t&&u(a)}}}function fe(i){let a,t,e,l,r,s,z,d,g,M,h,m,J,B,f,E,w,y,L,k,V,x,U,K,c=i[0]&&ee(i);return{c(){a=_("main"),t=_("div"),e=_("span"),l=N("Russian Dance - Tchaikovsky Nutcracker Suite"),r=O(),s=_("span"),z=N("Conducted by "),d=_("a"),g=N("Philip Milman"),M=O(),h=_("div"),m=_("audio"),B=O(),f=_("select"),E=_("option"),w=N("16"),y=_("option"),L=N("32"),k=_("option"),V=N("64"),x=O(),c&&c.c(),this.h()},l(b){a=p(b,"MAIN",{class:!0});var D=v(a);t=p(D,"DIV",{class:!0});var A=v(t);e=p(A,"SPAN",{style:!0,class:!0});var W=v(e);l=S(W,"Russian Dance - Tchaikovsky Nutcracker Suite"),W.forEach(u),r=q(A),s=p(A,"SPAN",{class:!0});var R=v(s);z=S(R,"Conducted by "),d=p(R,"A",{href:!0,target:!0,rel:!0,style:!0});var j=v(d);g=S(j,"Philip Milman"),j.forEach(u),R.forEach(u),M=q(A),h=p(A,"DIV",{style:!0});var P=v(h);m=p(P,"AUDIO",{id:!0,preload:!0,src:!0}),v(m).forEach(u),B=q(P),f=p(P,"SELECT",{id:!0,class:!0});var T=v(f);E=p(T,"OPTION",{class:!0});var G=v(E);w=S(G,"16"),G.forEach(u),y=p(T,"OPTION",{class:!0});var Q=v(y);L=S(Q,"32"),Q.forEach(u),k=p(T,"OPTION",{class:!0});var X=v(k);V=S(X,"64"),X.forEach(u),T.forEach(u),P.forEach(u),x=q(A),c&&c.l(A),A.forEach(u),D.forEach(u),this.h()},h(){I(e,"font-size","16pt"),o(e,"class","svelte-5nmszr"),o(d,"href","https://pmmusic.pro/"),o(d,"target","_blank"),o(d,"rel","noopener noreferrer"),I(d,"text-decoration","underline"),o(s,"class","svelte-5nmszr"),o(m,"id","piece"),m.controls=!0,o(m,"preload","auto"),ne(m.src,J=de+"/Tchaikovsky.mp3")||o(m,"src",J),E.__value=16,E.value=E.__value,o(E,"class","svelte-5nmszr"),y.__value=32,y.value=y.__value,y.selected=!0,o(y,"class","svelte-5nmszr"),k.__value=64,k.value=k.__value,o(k,"class","svelte-5nmszr"),o(f,"id","barCount"),o(f,"class","svelte-5nmszr"),i[1]===void 0&&re(()=>i[2].call(f)),I(h,"display","flex"),I(h,"gap","5px"),o(t,"class","wrapper svelte-5nmszr"),o(a,"class","svelte-5nmszr")},m(b,D){H(b,a,D),n(a,t),n(t,e),n(e,l),n(t,r),n(t,s),n(s,z),n(s,d),n(d,g),n(t,M),n(t,h),n(h,m),n(h,B),n(h,f),n(f,E),n(E,w),n(f,y),n(y,L),n(f,k),n(k,V),Y(f,i[1],!0),n(t,x),c&&c.m(t,null),U||(K=oe(f,"change",i[2]),U=!0)},p(b,[D]){D&2&&Y(f,b[1]),b[0]?c?c.p(b,D):(c=ee(b),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:Z,o:Z,d(b){b&&u(a),c&&c.d(),U=!1,K()}}}const F=10;function _e(i,a,t){let e,l,r=32;ie(()=>{var m;const z=document.getElementById("piece"),d=new AudioContext,g=d.createAnalyser();d.createMediaElementSource(z).connect(g),g.connect(d.destination),g.fftSize=r*2;let h=g.frequencyBinCount;t(0,e=new Uint8Array(h)),l=setInterval(()=>{g.getByteTimeDomainData(e),t(0,e)},50),(m=document.getElementById("barCount"))==null||m.addEventListener("change",()=>{g.fftSize=r*2,h=g.frequencyBinCount,t(0,e=new Uint8Array(h))})}),he(()=>{clearInterval(l)});function s(){r=ue(this),t(1,r)}return[e,r,s]}class ge extends ae{constructor(a){super(),se(this,a,_e,fe,le,{})}}export{ge as default};
