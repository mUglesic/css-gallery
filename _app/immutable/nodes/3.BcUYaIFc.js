import{s as Y,a as Z,b as $,n as x,o as ee}from"../chunks/scheduler.BKQnSgBI.js";import{S as te,i as se,e as b,f as B,c as y,h as E,g as H,j as N,d as m,s as C,b as u,a as M,k as v,l as R,m as le,n as K,t as ae,o as ne,p as re,q as Q,r as X,u as ie}from"../chunks/index.B20AW9aV.js";import{e as T}from"../chunks/each.D6YF6ztN.js";import{b as oe}from"../chunks/entry.CAUSiu64.js";import{b as ce}from"../chunks/paths.DwYEW1Pl.js";function j(i,e,t){const l=i.slice();l[5]=e[t],l[8]=t;const a=200/l[1];return l[6]=a,l}function F(i,e,t){const l=i.slice();return l[9]=e[t],l}function G(i){let e,t=i[9]+"",l;return{c(){e=b("option"),l=ae(t),this.h()},l(a){e=y(a,"OPTION",{class:!0});var s=E(e);l=ne(s,t),s.forEach(m),this.h()},h(){e.__value=i[9],re(e,e.__value),u(e,"class","svelte-pswg8m")},m(a,s){M(a,e,s),v(e,l)},p:x,d(a){a&&m(e)}}}function W(i){let e,t,l=T(i[0]),a=[];for(let s=0;s<l.length;s+=1)a[s]=J(j(i,l,s));return{c(){e=b("div"),t=Q("svg");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0,style:!0});var n=E(e);t=X(n,"svg",{class:!0,style:!0,viewBox:!0});var o=E(t);for(let g=0;g<a.length;g+=1)a[g].l(o);o.forEach(m),n.forEach(m),this.h()},h(){u(t,"class","visualizer-svg svelte-pswg8m"),C(t,"height","100%"),u(t,"viewBox","0 0 200 100"),u(e,"class","visualizer svelte-pswg8m"),C(e,"--vis-height",he+"px"),C(e,"--vis-scale",48/i[1])},m(s,n){M(s,e,n),v(e,t);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(t,null)},p(s,n){if(n&3){l=T(s[0]);let o;for(o=0;o<l.length;o+=1){const g=j(s,l,o);a[o]?a[o].p(g,n):(a[o]=J(g),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length}n&2&&C(e,"--vis-scale",48/s[1])},d(s){s&&m(e),K(a,s)}}}function J(i){let e,t,l,a;return{c(){e=Q("rect"),this.h()},l(s){e=X(s,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),E(e).forEach(m),this.h()},h(){u(e,"x",t=i[8]*i[6]),u(e,"y",0),u(e,"width",l=i[6]),u(e,"height",a=i[5]/128*100*.5),u(e,"class","svelte-pswg8m")},m(s,n){M(s,e,n)},p(s,n){n&6&&t!==(t=s[8]*s[6])&&u(e,"x",t),n&6&&l!==(l=s[6])&&u(e,"width",l),n&1&&a!==(a=s[5]/128*100*.5)&&u(e,"height",a)},d(s){s&&m(e)}}}function ue(i){let e,t,l,a="Russian Dance - Tchaikovsky Nutcracker Suite",s,n,o='Conducted by <a href="https://pmmusic.pro/" target="_blank" rel="noopener noreferrer" style="text-decoration: underline;">Philip Milman</a>',g,p,h,D,I,d,L,w,O="!!WARNING!!<br/>High values might be slow on some devices",q,z,V,S=T(i[2]),f=[];for(let c=0;c<S.length;c+=1)f[c]=G(F(i,S,c));let _=i[0]&&W(i);return{c(){e=b("main"),t=b("div"),l=b("span"),l.textContent=a,s=B(),n=b("span"),n.innerHTML=o,g=B(),p=b("div"),h=b("audio"),I=B(),d=b("select");for(let c=0;c<f.length;c+=1)f[c].c();L=B(),w=b("span"),w.innerHTML=O,q=B(),_&&_.c(),this.h()},l(c){e=y(c,"MAIN",{class:!0});var k=E(e);t=y(k,"DIV",{class:!0});var r=E(t);l=y(r,"SPAN",{style:!0,class:!0,"data-svelte-h":!0}),H(l)!=="svelte-1fl4kgi"&&(l.textContent=a),s=N(r),n=y(r,"SPAN",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1sdaby8"&&(n.innerHTML=o),g=N(r),p=y(r,"DIV",{style:!0});var A=E(p);h=y(A,"AUDIO",{id:!0,preload:!0,src:!0}),E(h).forEach(m),I=N(A),d=y(A,"SELECT",{id:!0,class:!0});var U=E(d);for(let P=0;P<f.length;P+=1)f[P].l(U);U.forEach(m),A.forEach(m),L=N(r),w=y(r,"SPAN",{style:!0,class:!0,"data-svelte-h":!0}),H(w)!=="svelte-ouikek"&&(w.innerHTML=O),q=N(r),_&&_.l(r),r.forEach(m),k.forEach(m),this.h()},h(){C(l,"font-size","1.4em"),u(l,"class","svelte-pswg8m"),u(n,"class","svelte-pswg8m"),u(h,"id","piece"),h.controls=!0,u(h,"preload","auto"),Z(h.src,D=ce+"/Tchaikovsky.mp3")||u(h,"src",D),u(d,"id","barCount"),u(d,"class","svelte-pswg8m"),i[1]===void 0&&$(()=>i[3].call(d)),C(p,"display","flex"),C(p,"gap","5px"),C(w,"color","firebrick"),C(w,"font-size","0.7em"),u(w,"class","svelte-pswg8m"),u(t,"class","wrapper svelte-pswg8m"),u(e,"class","svelte-pswg8m")},m(c,k){M(c,e,k),v(e,t),v(t,l),v(t,s),v(t,n),v(t,g),v(t,p),v(p,h),v(p,I),v(p,d);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(d,null);R(d,i[1],!0),v(t,L),v(t,w),v(t,q),_&&_.m(t,null),z||(V=le(d,"change",i[3]),z=!0)},p(c,[k]){if(k&4){S=T(c[2]);let r;for(r=0;r<S.length;r+=1){const A=F(c,S,r);f[r]?f[r].p(A,k):(f[r]=G(A),f[r].c(),f[r].m(d,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=S.length}k&6&&R(d,c[1]),c[0]?_?_.p(c,k):(_=W(c),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:x,o:x,d(c){c&&m(e),K(f,c),_&&_.d(),z=!1,V()}}}const he=400;function fe(i,e,t){let l,a;const s=[64,128,256,512];let n=128;ee(()=>{var d;const g=document.getElementById("piece"),p=new AudioContext,h=p.createAnalyser();p.createMediaElementSource(g).connect(h),h.connect(p.destination),h.fftSize=n*2;let I=h.frequencyBinCount;t(0,l=new Uint8Array(I)),a=setInterval(()=>{h.getByteTimeDomainData(l),t(0,l)},50),(d=document.getElementById("barCount"))==null||d.addEventListener("change",()=>{h.fftSize=n*2,I=h.frequencyBinCount,t(0,l=new Uint8Array(I))})}),oe(()=>{clearInterval(a)});function o(){n=ie(this),t(1,n),t(2,s)}return[l,n,s,o]}class ge extends te{constructor(e){super(),se(this,e,fe,ue,Y,{})}}export{ge as component};
